<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OBZENO</title>
    <link rel="stylesheet" href="css/styles.css">

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/supabase-client.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.3.0/fonts/remixicon.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
    <script>
        function getTotalCount() {
            try {
                const carrito = JSON.parse(localStorage.getItem("carrito")) || [];
                return carrito.reduce((acc, item) => acc + item.cantidad, 0);
            } catch (e) {
                console.error("Error al leer el carrito de localStorage:", e);
                return 0;
            }
        }
        function getWishlistCount() {
            try {
                const wishlist = JSON.parse(localStorage.getItem("wishlist")) || [];
                return wishlist.length;
            } catch (e) {
                return 0;
            }
        }
    </script>
    <script src="js/carrito.js"></script>
    <script src="js/wishlist.js"></script>
</head>

<body
        x-data="{carritoCount: getTotalCount(), wishlistCount: getWishlistCount(),
        isLoggedIn: false,
        userName: 'Invitado',

        async init() {
            await new Promise(r => setTimeout(r, 50));
            const user = await window.getUsuarioActual();
            if (user) {
                this.isLoggedIn = true;
                this.userName = user.displayName;
            }
            this.carritoCount = getTotalCount();
            this.wishlistCount = getWishlistCount();
        },
        logout() {
            window.cerrarSesion();
        }
    }"
        x-init="init()"
        @cart-count-updated.window="carritoCount = $event.detail"
        @wishlist-count-updated.window="wishlistCount = $event.detail">

<!/* -----------------------------------------------------------
    BARRA DE NAVEGACION
---------------------------------------------------------------*/>
<header>
    <div class="logo">
        <h1>OBZENO</h1>
    </div>
<nav>
    <ul>
        <li><a href="index.html">INICIO</a></li>
        <li>
            <a href="#">TIENDA DE ROPA</a>
            <ul class="submenu">
                <li><a href="hombre.html">HOMBRES</a></li>
                <li><a href="#">MUJERES</a></li>
                <li><a href="#">NIÑO</a></li>
                <li><a href="#">SUDADERAS</a></li>
                <li><a href="#">TENIS</a></li>
            </ul>
        </li>
        <li><a href="#">ROPA DE PELICULAS</a></li>
        <li><a href="#">ROPA DE ANIME</a></li>
        <li><a href="#">FIGURAS</a></li>

        <li x-show="isLoggedIn" class="user-menu" style="margin-left: 15px;">
            <a href="#" x-text="'HOLA, ' + userName.toUpperCase()">HOLA, USUARIO</a>
            <ul class="submenu" style="min-width: 160px;">
                <li><a href="#" @click.prevent="logout()">Cerrar Sesión</a></li>
            </ul>
        </li>

        <li x-show="!isLoggedIn" style="margin-left: 15px;">
            <a href="login.html">INICIAR SESION</a>
        </li>

        <a href="wishlist.html" class="wishlist-count-display">
        <i class="ri-heart-line"></i>
        <div class="wishlist-item-count" x-text="wishlistCount">0</div>
    </a>
        <a href="carrito.html" class="cartTab" id="cartLink">
            <i class="ri-shopping-cart-line"></i>
            <div class="cart-item-count" x-text="carritoCount">0</div>
        </a>
    </ul>
</nav>
    </header>

<!/* ------------------------------------------------------------
    BOTON QUE DIRECCIONA EL APARTADO DE OFERTAS
-------------------------------------------------------------- */>

<section class="hero">
    <div class="hero-content">
        <h4>BIENVENIDOS A OBZENO</h4>
        <button onclick="document.getElementById('ofertas-especiales').scrollIntoView({ behavior: 'smooth'})">
        VER OFERTAS ESPECIALES
        </button>
    </div>
</section>

<!/* -------------------------------------------------------------
    CARRUSEL DE IMAGENES
--------------------------------------------------------------- */>

<section class="carrusel">
    <div class="swiper">
        <div class="swiper-wrapper">
            <div class="swiper-slide"><img src="img/CARRUSEL/Carrusel1.jpg" alt="Imagen 1"></div>
            <div class="swiper-slide"><img src="img/CARRUSEL/Carrusel2.jpg" alt="Imagen 2"></div>
            <div class="swiper-slide"><img src="img/CARRUSEL/Carrusel3.jpg" alt="Imagen 3"></div>
            <div class="swiper-slide"><img src="img/CARRUSEL/Carrusel4.jpg" alt="Imagen 4"></div>
        </div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>
</section>

<!/* -------------------------------------------------------------
    PRODUCTOS DESTACADOS
--------------------------------------------------------------- */>

<section class="procutos-destacados">
     <div class="Productos-destacados">
            <h4>OBZENO</h4>
            <h5>PRODUCTOS DESTACADOS</h5>
        </div>
        <div class="productos">

    <!/ /////////////////////////////////////////////////
            REPETIR ESTE BLOQUE DE CODIGO POR PRODUCTOS
    ////////////////////////////////////////////////// */>

        <div class="producto">
            <button class ="wishlist-button" data-id-producto="BEAST BREATHING"
                x-data="{ active: getWishlist().some(p => p.id === 'BEAST BREATHING') }"
                @click="active = !active;

                wishlistCount = toggleWishlistAndGetNewCount('BEAST BREATHING', 'BEAST BREATHING', 270.00, 'img/DESTACADOS/Destacado1.jpg');"

                :class="{'active': active}">
                <i class="ri-heart-line" :class="{ 'ri-heart-fill': active, 'ri-heart-line': !active }"></i>
                <span x-text="active ? 'EN WISHLIST' : 'AÑADIR A WISHLIST'"></span>
            </button>

            <img src="img/DESTACADOS/Destacado1.jpg" alt="Camiseta geek 1">
            <h3>BEAST BREATHING</h3>
            <p class="precio"> $270.00 </p>
            <button class="agregar-carrito"

                @click="carritoCount = addToCartAndGetNewCount('BEAST BREATHING', 270.00, 'img/DESTACADOS/Destacado1.jpg')">

                <i class="ri-shopping-cart-line"></i> AGREGAR AL CARRITO
            </button>
        </div>

        <!/ /////////////////////////////////////
        ////////////////////////////////////// */>

        <div class="producto">
            <button class ="wishlist-button" data-id-producto="RETRO GAMES"
                    x-data="{ active: getWishlist().some(p => p.id === 'RETRO GAMES') }"
                    @click="active = !active;
                wishlistCount = toggleWishlistAndGetNewCount('RETRO GAMES', 'RETRO GAMES', 270.00, 'img/DESTACADOS/Destacado2.jpg');"

                    :class="{'active': active}">
                <i class="ri-heart-line" :class="{ 'ri-heart-fill': active, 'ri-heart-line': !active }"></i>
                <span x-text="active ? 'EN WISHLIST' : 'AÑADIR A WISHLIST'"></span>
            </button>

            <img src="img/DESTACADOS/Destacado2.jpg" alt="Camiseta geek 2">
            <h3>RETRO GAMES</h3>
            <p class="precio"> $270.00 </p>
            <button class="agregar-carrito"

                    @click="carritoCount = addToCartAndGetNewCount('RETRO GAMES', 270.00, 'img/DESTACADOS/Destacado2.jpg')">

                <i class="ri-shopping-cart-line"></i> AGREGAR AL CARRITO
            </button>
        </div>

        <div class="producto">
            <button class ="wishlist-button" data-id-producto="VENDETTA"
                    x-data="{ active: getWishlist().some(p => p.id === 'VENDETTA') }"
                    @click="active = !active;
                wishlistCount = toggleWishlistAndGetNewCount('VENDETTA', 'VENDETTA', 270.00, 'img/DESTACADOS/Destacado3.jpg');"

                    :class="{'active': active}">
                <i class="ri-heart-line" :class="{ 'ri-heart-fill': active, 'ri-heart-line': !active }"></i>
                <span x-text="active ? 'EN WISHLIST' : 'AÑADIR A WISHLIST'"></span>
            </button>

            <img src="img/DESTACADOS/Destacado3.jpg" alt="Camiseta geek 3">
            <h3>VENDETTA</h3>
            <p class="precio"> $270.00 </p>
            <button class="agregar-carrito"

                    @click="carritoCount = addToCartAndGetNewCount('VENDETTA', 270.00, 'img/DESTACADOS/Destacado3.jpg')">

                <i class="ri-shopping-cart-line"></i> AGREGAR AL CARRITO
            </button>
        </div>

        <div id="carrito-contenedor"></div>
        <script src="carrito.js"></script>

    </div>
    </section>

<!/* -------------------------------------------------------------
    PRODUCTOS DE OFERTAS ESPECIALES
--------------------------------------------------------------- */>
<section class="ofertas-especiales" id="ofertas-especiales">
    <h2> OFERTAS ESPECIALES </h2>
    <div class="productos">
    <!/ /////////////////////////////////////////////////
    REPETIR ESTE BLOQUE DE CODIGO POR PRODUCTOS
    ////////////////////////////////////////////////// */>

    <div class="producto">

        <button class ="wishlist-button" data-id-producto="A clockwork orange"
                x-data="{ active: getWishlist().some(p => p.id === 'A clockwork orange') }"
                @click="active = !active;
                wishlistCount = toggleWishlistAndGetNewCount('A clockwork orange', 'A clockwork orange', 270.00, 'img/OFERTAS/Oferta1.jpg');"

                :class="{'active': active}">
            <i class="ri-heart-line" :class="{ 'ri-heart-fill': active, 'ri-heart-line': !active }"></i>
            <span x-text="active ? 'EN WISHLIST' : 'AÑADIR A WISHLIST'"></span>
        </button>

        <img src="img/OFERTAS/Oferta1.jpg" alt="Camiseta geek Ofer1">
        <h3>A clockwork orange</h3>
        <p class="precio"> $270.00 </p>

        <button class="agregar-carrito"

                @click="carritoCount = addToCartAndGetNewCount('A clockwork orange', 270.00, 'img/OFERTAS/Oferta1.jpg')">

            <i class="ri-shopping-cart-line"></i> AGREGAR AL CARRITO
        </button>
    </div>

    <!/ /////////////////////////////////////
    ////////////////////////////////////// */>

    <div class="producto">

        <button class ="wishlist-button" data-id-producto="VIRGEN CARAS"
                x-data="{ active: getWishlist().some(p => p.id === 'VIRGEN CARAS') }"
                @click="active = !active;
                wishlistCount = toggleWishlistAndGetNewCount('VIRGEN CARAS', 'VIRGEN CARAS', 270.00, 'img/OFERTAS/Oferta2.jpg');"

                :class="{'active': active}">
            <i class="ri-heart-line" :class="{ 'ri-heart-fill': active, 'ri-heart-line': !active }"></i>
            <span x-text="active ? 'EN WISHLIST' : 'AÑADIR A WISHLIST'"></span>
        </button>

        <img src="img/OFERTAS/Oferta2.jpg" alt="Camiseta geek Ofer2">
        <h3>VIRGEN CARAS</h3>
        <p class="precio"> $270.00 </p>

        <button class="agregar-carrito"

                @click="carritoCount = addToCartAndGetNewCount('VIRGEN CARAS', 270.00, 'img/OFERTAS/Oferta2.jpg')">

            <i class="ri-shopping-cart-line"></i> AGREGAR AL CARRITO
        </button>
    </div>

    <div class="producto">

        <button class ="wishlist-button" data-id-producto="ROBERT JOHNSON"
                x-data="{ active: getWishlist().some(p => p.id === 'ROBERT JOHNSON') }"
                @click="active = !active;
                wishlistCount = toggleWishlistAndGetNewCount('ROBERT JOHNSON', 'ROBERT JOHNSON', 270.00, 'img/OFERTAS/Oferta3.jpg');"

                :class="{'active': active}">
            <i class="ri-heart-line" :class="{ 'ri-heart-fill': active, 'ri-heart-line': !active }"></i>
            <span x-text="active ? 'EN WISHLIST' : 'AÑADIR A WISHLIST'"></span>
        </button>

        <img src="img/OFERTAS/Oferta3.jpg" alt="Camiseta geek Ofer3">
        <h3>ROBERT JOHNSON</h3>
        <p class="precio"> $270.00 </p>

        <button class="agregar-carrito"

                @click="carritoCount = addToCartAndGetNewCount('ROBERT JOHNSON', 270.00, 'img/OFERTAS/Oferta3.jpg')">

            <i class="ri-shopping-cart-line"></i> AGREGAR AL CARRITO
        </button>
    </div>

    <div class="producto">

        <button class ="wishlist-button" data-id-producto="REBEL FORCES"
                x-data="{ active: getWishlist().some(p => p.id === 'REBEL FORCES') }"
                @click="active = !active;
                wishlistCount = toggleWishlistAndGetNewCount('REBEL FORCES', 'REBEL FORCES', 270.00, 'img/OFERTAS/Oferta4.jpg');"

                :class="{'active': active}">
            <i class="ri-heart-line" :class="{ 'ri-heart-fill': active, 'ri-heart-line': !active }"></i>
            <span x-text="active ? 'EN WISHLIST' : 'AÑADIR A WISHLIST'"></span>
        </button>

        <img src="img/OFERTAS/Oferta4.jpg" alt="Camiseta geek Ofer4">
        <h3>REBEL FORCES</h3>
        <p class="precio"> $270.00 </p>

        <button class="agregar-carrito"

                @click="carritoCount = addToCartAndGetNewCount('REBEL FORCES', 270.00, 'img/OFERTAS/Oferta4.jpg')">

            <i class="ri-shopping-cart-line"></i> AGREGAR AL CARRITO
        </button>
    </div>

    <div class="producto">

        <button class ="wishlist-button" data-id-producto="GHOST 2025"
                x-data="{ active: getWishlist().some(p => p.id === 'GHOST 2025') }"
                @click="active = !active;
                wishlistCount = toggleWishlistAndGetNewCount('GHOST 2025', 'GHOST 2025', 270.00, 'img/OFERTAS/Oferta5.jpg');"

                :class="{'active': active}">
            <i class="ri-heart-line" :class="{ 'ri-heart-fill': active, 'ri-heart-line': !active }"></i>
            <span x-text="active ? 'EN WISHLIST' : 'AÑADIR A WISHLIST'"></span>
        </button>

        <img src="img/OFERTAS/Oferta5.jpg" alt="Camiseta geek Ofer5">
        <h3>GHOST 2025</h3>
        <p class="precio"> $270.00 </p>

        <button class="agregar-carrito"

                @click="carritoCount = addToCartAndGetNewCount('GHOST 2025', 270.00, 'img/OFERTAS/Oferta5.jpg')">

            <i class="ri-shopping-cart-line"></i> AGREGAR AL CARRITO
        </button>
    </div>

    <div class="producto">

        <button class ="wishlist-button" data-id-producto="KILLERS VIÑETAS"
                x-data="{ active: getWishlist().some(p => p.id === 'KILLERS VIÑETAS') }"
                @click="active = !active;
                wishlistCount = toggleWishlistAndGetNewCount('KILLERS VIÑETAS', 'KILLERS VIÑETAS', 270.00, 'img/OFERTAS/Oferta6.jpg');"

                :class="{'active': active}">
            <i class="ri-heart-line" :class="{ 'ri-heart-fill': active, 'ri-heart-line': !active }"></i>
            <span x-text="active ? 'EN WISHLIST' : 'AÑADIR A WISHLIST'"></span>
        </button>

        <img src="img/OFERTAS/Oferta6.jpg" alt="Camiseta geek Ofer6">
        <h3>KILLERS VIÑETAS</h3>
        <p class="precio"> $270.00 </p>

        <button class="agregar-carrito"

                @click="carritoCount = addToCartAndGetNewCount('KILLERS VIÑETAS', 270.00, 'img/OFERTAS/Oferta6.jpg')">

            <i class="ri-shopping-cart-line"></i> AGREGAR AL CARRITO
        </button>
    </div>

    <div class="producto">

        <button class ="wishlist-button" data-id-producto="APROBADO POR CHAYANNE"
                x-data="{ active: getWishlist().some(p => p.id === 'APROBADO POR CHAYANNE') }"
                @click="active = !active;
                wishlistCount = toggleWishlistAndGetNewCount('APROBADO POR CHAYANNE', 'APROBADO POR CHAYANNE', 270.00, 'img/OFERTAS/Oferta7.jpg');"

                :class="{'active': active}">
            <i class="ri-heart-line" :class="{ 'ri-heart-fill': active, 'ri-heart-line': !active }"></i>
            <span x-text="active ? 'EN WISHLIST' : 'AÑADIR A WISHLIST'"></span>
        </button>

        <img src="img/OFERTAS/Oferta7.jpg" alt="Camiseta geek Ofer7">
        <h3>APROBADO POR CHAYANNE</h3>
        <p class="precio"> $270.00 </p>

        <button class="agregar-carrito"

                @click="carritoCount = addToCartAndGetNewCount('APROBADO POR CHAYANNE', 270.00, 'img/OFERTAS/Oferta7.jpg')">

            <i class="ri-shopping-cart-line"></i> AGREGAR AL CARRITO
        </button>
    </div>

    <div class="producto">

        <button class ="wishlist-button" data-id-producto="LACAN"
                x-data="{ active: getWishlist().some(p => p.id === 'LACAN') }"
                @click="active = !active;
                wishlistCount = toggleWishlistAndGetNewCount('LACAN', 'LACAN', 270.00, 'img/OFERTAS/Oferta8.jpg');"

                :class="{'active': active}">
            <i class="ri-heart-line" :class="{ 'ri-heart-fill': active, 'ri-heart-line': !active }"></i>
            <span x-text="active ? 'EN WISHLIST' : 'AÑADIR A WISHLIST'"></span>
        </button>

        <img src="img/OFERTAS/Oferta8.jpg" alt="Camiseta geek Ofer8">
        <h3>LACAN</h3>
        <p class="precio"> $270.00 </p>

        <button class="agregar-carrito"

                @click="carritoCount = addToCartAndGetNewCount('LACAN', 270.00, 'img/OFERTAS/Oferta8.jpg')">

            <i class="ri-shopping-cart-line"></i> AGREGAR AL CARRITO
        </button>
    </div>
    </div>
</section>

<!/* -------------------------------------------------------------
    PIE DE PAGINA
--------------------------------------------------------------- */>

<footer>
    <p>&copy; 2025 OBZENO. Todos los derechos reservedos por R34.</p>

<!/* -------------------------------------------------------------
    CONTACTO
---------------------------------------------------------------- */>
    <a href="contacto.html" class="btn-contacto">CONTACTAR</a>

</footer>

<!/* -------------------------------------------------------------
    SWIPER JS
--------------------------------------------------------------- */>

<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script src="js/CARRUSEL.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

</body>
</html>

<!/* -----------------------------------------------------------------
⢀⡴⠑⡄⠀⠀⠀⠀⠀⠀⠀⣀⣀⣤⣤⣤⣀⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠸⡇⠀⠿⡀⠀⠀⠀⣀⡴⢿⣿⣿⣿⣿⣿⣿⣿⣷⣦⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠑⢄⣠⠾⠁⣀⣄⡈⠙⣿⣿⣿⣿⣿⣿⣿⣿⣆⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⢀⡀⠁⠀⠀⠈⠙⠛⠂⠈⣿⣿⣿⣿⣿⠿⡿⢿⣆⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⢀⡾⣁⣀⠀⠴⠂⠙⣗⡀⠀⢻⣿⣿⠭⢤⣴⣦⣤⣹⠀⠀⠀⢀⢴⣶⣆
⠀⠀⢀⣾⣿⣿⣿⣷⣮⣽⣾⣿⣥⣴⣿⣿⡿⢂⠔⢚⡿⢿⣿⣦⣴⣾⠁⠸⣼⡿
⠀⢀⡞⠁⠙⠻⠿⠟⠉⠀⠛⢹⣿⣿⣿⣿⣿⣌⢤⣼⣿⣾⣿⡟⠉⠀⠀⠀⠀⠀
⠀⣾⣷⣶⠇⠀⠀⣤⣄⣀⡀⠈⠻⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡇⠀⠀⠀⠀⠀⠀
⠀⠉⠈⠉⠀⠀⢦⡈⢻⣿⣿⣿⣶⣶⣶⣶⣤⣽⡹⣿⣿⣿⣿⡇⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠉⠲⣽⡻⢿⣿⣿⣿⣿⣿⣿⣷⣜⣿⣿⣿⡇⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⢸⣿⣿⣷⣶⣮⣭⣽⣿⣿⣿⣿⣿⣿⣿⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⣀⣀⣈⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠇⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠃⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠹⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⠟⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠉⠛⠻⠿⠿⠿⠿⠛⠉
------------------------------------------------------------------- */>